import{_ as N,g as m,h as t,b as g,c as k,d as n,t as C,i as e,j as u,m as I,r as b,p as T,f as U,o as j,a as O,u as A,w as S,k as $,n as F,F as H,l as E,q as J,s as M,x as P,y as G}from"./index-ef06b876.js";import{g as V}from"./Instance-5d31bedb.js";const Q="/logo-sider.png";const W=a=>(T("data-v-334d2762"),a=a(),U(),a),X={class:"top-bar"},Y={class:"top-bar-info"},Z=W(()=>n("span",{style:{"padding-left":"2px"}},"退出",-1)),ee={style:{"padding-left":"3px","font-weight":"bold"}},oe={__name:"TopBar",props:{userInfo:{type:Object,required:!0},title:{type:String,required:!0}},setup(a){const f=a,p=V(),l=m(""),d=m(!1),h=()=>{d.value=!0},_=()=>{p.changeUserPassword(f.userInfo.userId,l.value).then(c=>{c.data.code===1?I.info(c.data.data):I.info(c.data.msg)}),l.value="",d.value=!1},x=()=>{l.value="",d.value=!1},y=()=>{p.logoutApi().then(c=>{c.data.code===1&&b.push("/login")})};return(c,i)=>{const o=t("a-input"),s=t("a-modal"),w=t("LogoutOutlined");return g(),k("div",X,[n("div",null,C(f.title),1),e(s,{open:d.value,"onUpdate:open":i[1]||(i[1]=v=>d.value=v),"ok-text":"确定","cancel-text":"取消",onOk:_,onCancel:x,title:"修改密码"},{default:u(()=>[e(o,{id:"password",value:l.value,"onUpdate:value":i[0]||(i[0]=v=>l.value=v),placeHolder:"新密码"},null,8,["value"])]),_:1},8,["open"]),n("div",Y,[n("div",{onClick:h},"修改密码"),n("div",{onClick:y},[e(w,{onClick:y}),Z]),n("span",ee,C(f.userInfo.userName),1)])])}}},te=N(oe,[["__scopeId","data-v-334d2762"]]);const ne=a=>(T("data-v-6d22cd39"),a=a(),U(),a),ae={class:"loading"},se=ne(()=>n("div",{class:"logo"},[n("img",{src:Q,style:{padding:"30px 8px 30px 8px",width:"100%"},alt:"logo"})],-1)),le={class:"nav-text"},de={style:{padding:"24px",background:"#fff",minHeight:"360px"}},ie={__name:"Home",setup(a){const f=V();j(()=>{f.whoami().then(o=>{o.data.code===1?(p=o.data.data,l.value=p.roleId,d.value=1,l.value&&_.push({id:"3",name:"教师管理",icon:"UserOutlined",url:"/home/user"},{id:"4",name:"管理员管理",icon:"ToolOutlined",url:"/home/manager"}),i.value=_.find(s=>s.url===h.value)?[_.find(s=>s.url===h.value).id]:["2"]):(I.info(o.data.msg),b.push("/login"))})});let p=O({userId:void 0,roleId:void 0,userJobnumber:void 0,userName:void 0});const l=m(),d=m(0),h=m(A().path),_=O([{id:"1",name:"资产管理",icon:"PayCircleOutlined",url:"/home/item"},{id:"2",name:"实验室管理",icon:"HomeOutlined",url:"/home/lab"}]),x=o=>{b.push(o)},y=(o,s)=>{console.log(o,s)},c=o=>{console.log(o)},i=m(["1"]);return(o,s)=>{const w=t("a-spin"),v=t("a-menu-item"),K=t("a-menu"),L=t("a-layout-sider"),R=t("a-layout-header"),q=t("RouterView"),z=t("a-layout-content"),D=t("a-layout-footer"),B=t("a-layout");return g(),k(H,null,[S(n("div",ae,[e(w,{size:"large"})],512),[[$,!d.value]]),S(e(B,{style:{height:"auto","min-height":"100vh"},class:F({themeRed:!l.value})},{default:u(()=>[e(L,{breakpoint:"lg","collapsed-width":"0",onCollapse:y,onBreakpoint:c},{default:u(()=>[se,e(K,{selectedKeys:i.value,"onUpdate:selectedKeys":s[0]||(s[0]=r=>i.value=r),theme:"dark",mode:"inline"},{default:u(()=>[(g(!0),k(H,null,E(_,r=>(g(),P(v,{key:r.id,onClick:ue=>x(r.url)},{default:u(()=>[(g(),P(G(r.icon),{style:{"font-size":"16px","line-height":"40px"}})),n("span",le,C(r.name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selectedKeys"])]),_:1}),e(B,{style:{"min-width":"1000px"}},{default:u(()=>[e(R,{style:{background:"#fff"}},{default:u(()=>[e(te,{userInfo:J(p),title:_.find(r=>r.id===i.value[0]).name},null,8,["userInfo","title"])]),_:1}),e(z,{style:{margin:"24px 16px 0"}},{default:u(()=>[n("div",de,[e(q)])]),_:1}),e(D,{style:{"text-align":"center"}},{default:u(()=>[M(" 开发维护：西安电子科技大学电子工程学院 ")]),_:1})]),_:1})]),_:1},8,["class"]),[[$,d.value]])],64)}}},_e=N(ie,[["__scopeId","data-v-6d22cd39"]]);export{_e as default};
