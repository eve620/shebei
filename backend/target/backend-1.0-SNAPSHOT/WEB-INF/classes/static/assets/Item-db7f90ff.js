import{_ as X,g as _,o as Y,h as m,b as f,c as N,i as a,j as t,w as F,k as O,d as R,F as U,m as I,s,l as h,q as C,z as Z,x as L,t as q}from"./index-ef06b876.js";import{g as ee}from"./Instance-5d31bedb.js";import{O as ae,d as le,D as te}from"./exportToExcel-618ac685.js";const ue={class:"loading"},de={key:0},oe=["onClick"],ne={__name:"Item",setup(se){const r=ee();let T,c,b;const u=_({}),A=_(!1),w=_(!1),D=async()=>{if(u.value={},c===void 0||b===void 0){const d=await r.getAllUserList(),e=await r.getAllLabList();c=d.data.data,b=e.data.data}w.value=!0},M=d=>{i.value=!1,r.getItemList(d).then(e=>{p.value=e.data.data,i.value=!0})},g=_(),V=()=>{g.value.validateFields().then(d=>{i.value=!1,r.addItem(u.value).then(e=>{e.data.code===1?(I.info(e.data.data),r.getItemList().then(o=>{p.value=o.data.data,i.value=!0})):(I.info(e.data.msg),i.value=!0)}),w.value=!1}).catch(d=>{console.log("Validate Failed:",d)})},z=()=>{g.value.resetFields(),w.value=!1},x=_(!1),J=async d=>{if(u.value=JSON.parse(JSON.stringify(d)),c===void 0||b===void 0){const e=await r.getAllUserList(),o=await r.getAllLabList();c=e.data.data,b=o.data.data}x.value=!0},j=()=>{g.value.validateFields().then(d=>{i.value=!1,r.editItem(u.value).then(e=>{e.data.code===1?(I.info(e.data.data),r.getItemList().then(o=>{p.value=o.data.data,i.value=!0})):(I.info(e.data.msg),i.value=!0)}),x.value=!1}).catch(d=>{console.log("Validate Failed:",d)})},$=()=>{g.value.resetFields(),x.value=!1},G=d=>{i.value=!1,r.deleteItemById(d).then(e=>{e.data.code===1?(I.info(e.data.data),r.getItemList().then(o=>{p.value=o.data.data,i.value=!0})):I.info(e.data.msg)})};Y(()=>{r.whoami().then(d=>{d.data.code===1&&(T=d.data.data,A.value=T.roleId)}),r.getItemList().then(d=>{p.value=d.data.data,i.value=!0})});const H=()=>{le("/item",p.value,"资产表.xlsx")},p=_(),i=_(!1),K=[{title:"类型",dataIndex:"itemType",width:"10%"},{title:"编号",dataIndex:"itemNumber",width:"10%"},{title:"名称",dataIndex:"itemName",width:"15%"},{title:"型号",dataIndex:"itemModel",width:"15%"},{title:"价值",dataIndex:"itemPrice",width:"10%"},{title:"领用人",dataIndex:"userName",width:"10%"},{title:"存放实验室",dataIndex:"labName",width:"10%"},{title:"状态",dataIndex:"itemStatus",width:"8%"},{title:"操作",dataIndex:"operation"}];return(d,e)=>{const o=m("a-radio-button"),y=m("a-radio-group"),n=m("a-form-item"),v=m("a-input"),S=m("a-select-option"),k=m("a-select"),B=m("a-form"),E=m("a-modal"),Q=m("a-spin"),W=m("a-table");return f(),N(U,null,[a(E,{open:w.value,"onUpdate:open":e[9]||(e[9]=l=>w.value=l),"ok-text":"确定","cancel-text":"取消",onOk:V,onCancel:z,title:"添加"},{default:t(()=>[a(B,{ref_key:"formRef",ref:g,model:u.value,labelCol:{span:6},wrapperCol:{span:14}},{default:t(()=>[a(n,{name:"itemType",label:"资产类型",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(y,{value:u.value.itemType,"onUpdate:value":e[0]||(e[0]=l=>u.value.itemType=l)},{default:t(()=>[a(o,{value:"仪器设备"},{default:t(()=>[s("仪器设备")]),_:1}),a(o,{value:"低值设备"},{default:t(()=>[s("低值设备")]),_:1}),a(o,{value:"家具"},{default:t(()=>[s("家具")]),_:1})]),_:1},8,["value"])]),_:1}),a(n,{label:"资产编号"},{default:t(()=>[a(v,{value:u.value.itemNumber,"onUpdate:value":e[1]||(e[1]=l=>u.value.itemNumber=l),placeholder:"请输入资产编号"},null,8,["value"])]),_:1}),a(n,{name:"itemName",label:"资产名称",rules:[{required:!0,message:"请输入资产名称"}]},{default:t(()=>[a(v,{value:u.value.itemName,"onUpdate:value":e[2]||(e[2]=l=>u.value.itemName=l),placeholder:"请输入资产名称"},null,8,["value"])]),_:1}),a(n,{label:"型号"},{default:t(()=>[a(v,{value:u.value.itemModel,"onUpdate:value":e[3]||(e[3]=l=>u.value.itemModel=l),placeholder:"请输入型号"},null,8,["value"])]),_:1}),a(n,{name:"itemPrice",label:"价值",rules:[{required:!0,message:"请输入价值"}]},{default:t(()=>[a(v,{value:u.value.itemPrice,"onUpdate:value":e[4]||(e[4]=l=>u.value.itemPrice=l),placeholder:"请输入价值"},null,8,["value"])]),_:1}),a(n,{label:"净值"},{default:t(()=>[a(v,{value:u.value.itemNetworth,"onUpdate:value":e[5]||(e[5]=l=>u.value.itemNetworth=l),placeholder:"请输入净值"},null,8,["value"])]),_:1}),a(n,{name:"userName",label:"领用人",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(k,{value:u.value.userName,"onUpdate:value":e[6]||(e[6]=l=>u.value.userName=l),placeholder:"请选择"},{default:t(()=>[(f(!0),N(U,null,h(C(c),l=>(f(),L(S,{value:l.userName},{default:t(()=>[s(q(l.userName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{label:"实验室"},{default:t(()=>[a(k,{value:u.value.labName,"onUpdate:value":e[7]||(e[7]=l=>u.value.labName=l),placeholder:"请选择"},{default:t(()=>[(f(!0),N(U,null,h(C(b),l=>(f(),L(S,{value:l},{default:t(()=>[s(q(l),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{name:"itemStatus",label:"状态",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(y,{value:u.value.itemStatus,"onUpdate:value":e[8]||(e[8]=l=>u.value.itemStatus=l)},{default:t(()=>[a(o,{value:"在用"},{default:t(()=>[s("在用")]),_:1}),a(o,{value:"停用"},{default:t(()=>[s("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),a(ae,{addShow:A.value,onAdd:D,onExport:H,onSearch:M},null,8,["addShow"]),F(R("div",ue,[a(Q,{size:"large"})],512),[[O,!i.value]]),a(E,{open:x.value,"onUpdate:open":e[19]||(e[19]=l=>x.value=l),"ok-text":"确定","cancel-text":"取消",onOk:j,onCancel:$,title:"编辑"},{default:t(()=>[a(B,{ref_key:"formRef",ref:g,model:u.value,labelCol:{span:6},wrapperCol:{span:14}},{default:t(()=>[a(n,{name:"itemType",label:"资产类型",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(y,{value:u.value.itemType,"onUpdate:value":e[10]||(e[10]=l=>u.value.itemType=l)},{default:t(()=>[a(o,{value:"仪器设备"},{default:t(()=>[s("仪器设备")]),_:1}),a(o,{value:"低值设备"},{default:t(()=>[s("低值设备")]),_:1}),a(o,{value:"家具"},{default:t(()=>[s("家具")]),_:1})]),_:1},8,["value"])]),_:1}),a(n,{label:"资产编号"},{default:t(()=>[a(v,{value:u.value.itemNumber,"onUpdate:value":e[11]||(e[11]=l=>u.value.itemNumber=l),placeholder:"请输入资产编号"},null,8,["value"])]),_:1}),a(n,{name:"itemName",label:"资产名称",rules:[{required:!0,message:"请输入资产名称"}]},{default:t(()=>[a(v,{value:u.value.itemName,"onUpdate:value":e[12]||(e[12]=l=>u.value.itemName=l),placeholder:"请输入资产名称"},null,8,["value"])]),_:1}),a(n,{label:"型号"},{default:t(()=>[a(v,{value:u.value.itemModel,"onUpdate:value":e[13]||(e[13]=l=>u.value.itemModel=l),placeholder:"请输入型号"},null,8,["value"])]),_:1}),a(n,{name:"itemPrice",label:"价值",rules:[{required:!0,message:"请输入价值"}]},{default:t(()=>[a(v,{value:u.value.itemPrice,"onUpdate:value":e[14]||(e[14]=l=>u.value.itemPrice=l),placeholder:"请输入价值"},null,8,["value"])]),_:1}),a(n,{label:"净值"},{default:t(()=>[a(v,{value:u.value.itemNetworth,"onUpdate:value":e[15]||(e[15]=l=>u.value.itemNetworth=l),placeholder:"请输入净值"},null,8,["value"])]),_:1}),a(n,{name:"userName",label:"领用人",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(k,{value:u.value.userName,"onUpdate:value":e[16]||(e[16]=l=>u.value.userName=l),placeholder:"请选择"},{default:t(()=>[(f(!0),N(U,null,h(C(c),l=>(f(),L(S,{value:l.userName},{default:t(()=>[s(q(l.userName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{label:"实验室"},{default:t(()=>[a(k,{value:u.value.labName,"onUpdate:value":e[17]||(e[17]=l=>u.value.labName=l),placeholder:"请选择"},{default:t(()=>[(f(!0),N(U,null,h(C(b),l=>(f(),L(S,{value:l},{default:t(()=>[s(q(l),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{name:"itemStatus",label:"状态",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[a(y,{value:u.value.itemStatus,"onUpdate:value":e[18]||(e[18]=l=>u.value.itemStatus=l)},{default:t(()=>[a(o,{value:"在用"},{default:t(()=>[s("在用")]),_:1}),a(o,{value:"停用"},{default:t(()=>[s("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),F(a(W,{columns:K,"data-source":p.value,"row-key":"itemId",bordered:""},{bodyCell:t(({column:l,record:P})=>[l.dataIndex==="operation"?(f(),N("span",de,[R("a",{onClick:re=>J(P)},"编辑",8,oe),F(a(te,{onDelete:G,tagetId:P.itemId},null,8,["tagetId"]),[[O,A.value]])])):Z("",!0)]),_:1},8,["data-source"]),[[O,i.value]])],64)}}},fe=X(ne,[["__scopeId","data-v-7ee40743"]]);export{fe as default};
