import{_ as le,u as ue,A as de,g as c,o as oe,h as p,b as f,c as S,i as a,j as l,d as w,t as L,q as U,w as R,k as B,F as C,m as N,s as r,l as D,B as ne,z as se,p as ie,f as re,x as E}from"./index-e6beac7b.js";import{g as ve}from"./Instance-3897144e.js";import{O as me,d as pe,D as fe}from"./exportToExcel-4ab05172.js";import{d as _e}from"./utils-cffd9ece.js";const ce=h=>(ie("data-v-0db96f19"),h=h(),re(),h),be={style:{display:"flex","justify-content":"space-between",padding:"0 10px"}},ge=ce(()=>w("span",{style:{color:"#707070"}},"返回",-1)),Ne={style:{color:"#707070","font-weight":"bold"}},we={class:"loading"},Ie={key:0},xe=["onClick"],ye={__name:"LabDetail",setup(h){const V=ue(),z=de(),v=_e(V.query.id),j=()=>{z.back()},s=ve();let F,b,I;const u=c({}),q=c(!1),x=c(!1),J=async()=>{if(u.value={labName:v},b===void 0||I===void 0){const d=await s.getAllUserList(),e=await s.getAllLabList();b=d.data.data,I=e.data.data}x.value=!0},$=d=>{i.value=!1,s.getItemList(d,v).then(e=>{_.value=e.data.data,i.value=!0})},g=c(),G=()=>{g.value.validateFields().then(d=>{i.value=!1,s.addItem(u.value).then(e=>{e.data.code===1?(N.info(e.data.data),s.getItemList(null,v).then(o=>{_.value=o.data.data,i.value=!0})):(N.info(e.data.msg),i.value=!0)}),x.value=!1}).catch(d=>{console.log("Validate Failed:",d)})},H=()=>{g.value.resetFields(),x.value=!1},y=c(!1),K=async d=>{if(u.value=JSON.parse(JSON.stringify(d)),b===void 0||I===void 0){const e=await s.getAllUserList(),o=await s.getAllLabList();b=e.data.data,I=o.data.data}y.value=!0},Q=()=>{g.value.validateFields().then(d=>{i.value=!1,s.editItem(u.value).then(e=>{e.data.code===1?(N.info(e.data.data),s.getItemList(null,v).then(o=>{_.value=o.data.data,i.value=!0})):(N.info(e.data.msg),i.value=!0)}),y.value=!1}).catch(d=>{console.log("Validate Failed:",d)})},W=()=>{g.value.resetFields(),y.value=!1},X=d=>{i.value=!1,s.deleteItemById(d).then(e=>{e.data.code===1?(N.info(e.data.data),s.getItemList(null,v).then(o=>{_.value=o.data.data,i.value=!0})):N.info(e.data.msg)})};oe(()=>{s.whoami().then(d=>{d.data.code===1&&(F=d.data.data,q.value=F.roleId)}),s.getItemList(null,v).then(d=>{_.value=d.data.data,i.value=!0})});const Y=()=>{pe("/item",_.value,v+"资产详情表.xlsx")},_=c(),i=c(!1),Z=[{title:"类型",dataIndex:"itemType",width:"10%"},{title:"编号",dataIndex:"itemNumber",width:"10%"},{title:"名称",dataIndex:"itemName",width:"15%"},{title:"型号",dataIndex:"itemModel",width:"15%"},{title:"价值",dataIndex:"itemPrice",width:"10%"},{title:"领用人",dataIndex:"userName",width:"10%"},{title:"存放实验室",dataIndex:"labName",width:"10%"},{title:"状态",dataIndex:"itemStatus",width:"8%"},{title:"操作",dataIndex:"operation"}];return(d,e)=>{const o=p("a-radio-button"),k=p("a-radio-group"),n=p("a-form-item"),m=p("a-input"),A=p("a-select-option"),O=p("a-select"),T=p("a-form"),P=p("a-modal"),ee=p("LeftOutlined"),ae=p("a-spin"),te=p("a-table");return f(),S(C,null,[a(P,{open:x.value,"onUpdate:open":e[9]||(e[9]=t=>x.value=t),"ok-text":"确定","cancel-text":"取消",onOk:G,onCancel:H,title:"添加"},{default:l(()=>[a(T,{ref_key:"formRef",ref:g,model:u.value,labelCol:{span:6},wrapperCol:{span:14}},{default:l(()=>[a(n,{name:"itemType",label:"资产类型",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(k,{value:u.value.itemType,"onUpdate:value":e[0]||(e[0]=t=>u.value.itemType=t)},{default:l(()=>[a(o,{value:"仪器设备"},{default:l(()=>[r("仪器设备")]),_:1}),a(o,{value:"低值设备"},{default:l(()=>[r("低值设备")]),_:1}),a(o,{value:"家具"},{default:l(()=>[r("家具")]),_:1})]),_:1},8,["value"])]),_:1}),a(n,{label:"资产编号"},{default:l(()=>[a(m,{value:u.value.itemNumber,"onUpdate:value":e[1]||(e[1]=t=>u.value.itemNumber=t),placeholder:"请输入资产编号"},null,8,["value"])]),_:1}),a(n,{name:"itemName",label:"资产名称",rules:[{required:!0,message:"请输入资产名称"}]},{default:l(()=>[a(m,{value:u.value.itemName,"onUpdate:value":e[2]||(e[2]=t=>u.value.itemName=t),placeholder:"请输入资产名称"},null,8,["value"])]),_:1}),a(n,{label:"型号"},{default:l(()=>[a(m,{value:u.value.itemModel,"onUpdate:value":e[3]||(e[3]=t=>u.value.itemModel=t),placeholder:"请输入型号"},null,8,["value"])]),_:1}),a(n,{name:"itemPrice",label:"价值",rules:[{required:!0,message:"请输入价值"}]},{default:l(()=>[a(m,{value:u.value.itemPrice,"onUpdate:value":e[4]||(e[4]=t=>u.value.itemPrice=t),placeholder:"请输入价值"},null,8,["value"])]),_:1}),a(n,{label:"净值"},{default:l(()=>[a(m,{value:u.value.itemNetworth,"onUpdate:value":e[5]||(e[5]=t=>u.value.itemNetworth=t),placeholder:"请输入净值"},null,8,["value"])]),_:1}),a(n,{name:"userName",label:"领用人",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(O,{value:u.value.userName,"onUpdate:value":e[6]||(e[6]=t=>u.value.userName=t),placeholder:"请选择"},{default:l(()=>[(f(!0),S(C,null,D(U(b),t=>(f(),E(A,{value:t.userName},{default:l(()=>[r(L(t.userName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{label:"实验室"},{default:l(()=>[a(m,{value:U(v),"onUpdate:value":e[7]||(e[7]=t=>ne(v)?v.value=t:null),disabled:!0},null,8,["value"])]),_:1}),a(n,{name:"itemStatus",label:"状态",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(k,{value:u.value.itemStatus,"onUpdate:value":e[8]||(e[8]=t=>u.value.itemStatus=t)},{default:l(()=>[a(o,{value:"在用"},{default:l(()=>[r("在用")]),_:1}),a(o,{value:"停用"},{default:l(()=>[r("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),a(me,{addShow:q.value,onAdd:J,onExport:Y,onSearch:$},null,8,["addShow"]),w("div",be,[w("div",{style:{cursor:"pointer"},onClick:j},[a(ee,{style:{padding:"0 5px 15px 0","font-size":"15px",color:"#707070"}}),ge]),w("span",Ne,L(U(v)),1)]),R(w("div",we,[a(ae,{size:"large"})],512),[[B,!i.value]]),a(P,{open:y.value,"onUpdate:open":e[19]||(e[19]=t=>y.value=t),"ok-text":"确定","cancel-text":"取消",onOk:Q,onCancel:W,title:"编辑"},{default:l(()=>[a(T,{ref_key:"formRef",ref:g,model:u.value,labelCol:{span:6},wrapperCol:{span:14}},{default:l(()=>[a(n,{name:"itemType",label:"资产类型",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(k,{value:u.value.itemType,"onUpdate:value":e[10]||(e[10]=t=>u.value.itemType=t)},{default:l(()=>[a(o,{value:"仪器设备"},{default:l(()=>[r("仪器设备")]),_:1}),a(o,{value:"低值设备"},{default:l(()=>[r("低值设备")]),_:1}),a(o,{value:"家具"},{default:l(()=>[r("家具")]),_:1})]),_:1},8,["value"])]),_:1}),a(n,{label:"资产编号"},{default:l(()=>[a(m,{value:u.value.itemNumber,"onUpdate:value":e[11]||(e[11]=t=>u.value.itemNumber=t),placeholder:"请输入资产编号"},null,8,["value"])]),_:1}),a(n,{name:"itemName",label:"资产名称",rules:[{required:!0,message:"请输入资产名称"}]},{default:l(()=>[a(m,{value:u.value.itemName,"onUpdate:value":e[12]||(e[12]=t=>u.value.itemName=t),placeholder:"请输入资产名称"},null,8,["value"])]),_:1}),a(n,{label:"型号"},{default:l(()=>[a(m,{value:u.value.itemModel,"onUpdate:value":e[13]||(e[13]=t=>u.value.itemModel=t),placeholder:"请输入型号"},null,8,["value"])]),_:1}),a(n,{name:"itemPrice",label:"价值",rules:[{required:!0,message:"请输入价值"}]},{default:l(()=>[a(m,{value:u.value.itemPrice,"onUpdate:value":e[14]||(e[14]=t=>u.value.itemPrice=t),placeholder:"请输入价值"},null,8,["value"])]),_:1}),a(n,{label:"净值"},{default:l(()=>[a(m,{value:u.value.itemNetworth,"onUpdate:value":e[15]||(e[15]=t=>u.value.itemNetworth=t),placeholder:"请输入净值"},null,8,["value"])]),_:1}),a(n,{name:"userName",label:"领用人",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(O,{value:u.value.userName,"onUpdate:value":e[16]||(e[16]=t=>u.value.userName=t),placeholder:"请选择"},{default:l(()=>[(f(!0),S(C,null,D(U(b),t=>(f(),E(A,{value:t.userName},{default:l(()=>[r(L(t.userName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{label:"实验室"},{default:l(()=>[a(O,{value:u.value.labName,"onUpdate:value":e[17]||(e[17]=t=>u.value.labName=t),placeholder:"请选择"},{default:l(()=>[(f(!0),S(C,null,D(U(I),t=>(f(),E(A,{value:t},{default:l(()=>[r(L(t),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),a(n,{name:"itemStatus",label:"状态",rules:[{required:!0,message:"请选择"}]},{default:l(()=>[a(k,{value:u.value.itemStatus,"onUpdate:value":e[18]||(e[18]=t=>u.value.itemStatus=t)},{default:l(()=>[a(o,{value:"在用"},{default:l(()=>[r("在用")]),_:1}),a(o,{value:"停用"},{default:l(()=>[r("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),R(a(te,{columns:Z,"data-source":_.value,"row-key":"itemId",bordered:""},{bodyCell:l(({column:t,record:M})=>[t.dataIndex==="operation"?(f(),S("span",Ie,[w("a",{onClick:Se=>K(M)},"编辑",8,xe),R(a(fe,{onDelete:X,tagetId:M.itemId},null,8,["tagetId"]),[[B,q.value]])])):se("",!0)]),_:1},8,["data-source"]),[[B,i.value]])],64)}}},Ce=le(ye,[["__scopeId","data-v-0db96f19"]]);export{Ce as default};
